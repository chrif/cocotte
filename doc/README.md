# Cocotte

Cocotte aims at easing the learning curve for web developers starting with cloud hosting and application containerization. You get a basic and affordable installation, allowing you to focus on your project(s) first, and learn about your infrastructure later:

* [Docker](https://www.docker.com/) containers for all processes (free).
* [Digital Ocean](https://www.digitalocean.com/) as the cloud provider (5$ a month).
* [Traefik](https://traefik.io/) as the reverse proxy for hostname routing and SSL certificates automation (free).
* [Logz.io](https://logz.io/) (an ELK stack as a service) for monitoring all the logs generated by your applications (the free version).

## In pseudo-code

```
$ cocotte install
$ cocotte add --name="my-symfony-app" --hostname="app1.mydomain.com"
$ cocotte add --name="my-static-website" --hostname="app2.mydomain.com"
$ cocotte add --name="my-drupal-site" --hostname="app3.mydomain.com"
$ cocotte add --name="my-nodejs-app" --hostname="app4.mydomain.com"

$ curl https://app1.mydomain.com
Served by Nginx
$ curl https://app2.mydomain.com
Served by a different Nginx
$ curl https://app3.mydomain.com
Served by Apache HTTP Server
$ curl https://app4.mydomain.com
Served by Node.js 
```

These applications/websites are:
 * all on the same virtual machine in the cloud
 * all listening on the port 80 and 443 
 * each using a valid SSL certificate
 * each running on a different operating system

The 5$ a month cost is for the cheapest cloud machine, assuming all these apps can share 1GB memory and 20GB disk, which they can, thanks to application containerization.

## In details

Cocotte is a free cloud installer for hosting multiple containerized applications, each accessible through https with a different hostname, but all hosted on one cloud machine at 5$ a month. This is the only cost for the infrastructure that Cocotte puts in place.

This is just an installer though. Eventually, you will have to learn how it works, but as opposed to a solution that would lock you in, you are in control once the cloud machine is provisioned, and you don't need Cocotte anymore. 

Optionally, and in the hope to get you started even faster, Cocotte has a template feature for adding a new Docker application to your infrastructure. It generates deployment scripts for a https web server, in a folder ready for source control. Two templates are available, a simple web server with a "Hello world" page, and a Symfony 4 application. The intended way of developing and deploying with these application models is <a href="#Documentation">documented</a>.

Cocotte is fully tested on [Travis CI](https://travis-ci.org/chrif/cocotte), so there is no surprises with tutorials that used to work when they were written but are now outdated. The build itself is the tutorial, and if it passes, you can be confident that Cocotte works.

## Pricing

Trying out Cocotte is completely free if you don't have a Digital Ocean account and create one with [this link](https://m.do.co/c/c25ed78e51c5) which gives you a 10$ credit.

If you already have a Digital Ocean account, then you probably know about cloud pricing. For those that don't, you are charged $0.007/hour by Digital Ocean for the machine that Cocotte creates. So just trying out Cocotte and then destroying the machine costs less than 1 cent. Keeping the machine online for a month costs 5$. 

[Read about Digital Ocean pricing](https://www.digitalocean.com/pricing/).

## Requirements

* A Mac or Linux operating system.
* Docker Community Edition (including Docker Compose and Docker Machine).
* A Digital Ocean account.
* A domain name using the name servers of Digital Ocean.

## Installation

* Install [Docker Community Edition](https://www.docker.com/community-edition) (including Docker Compose and Docker Machine).
* If you don't have a Digital Ocean account, create one with [this link](https://m.do.co/c/c25ed78e51c5) and you will get a 10$ credit, allowing you to try Cocotte for free.
* Generate a [Digital Ocean API token](https://cloud.digitalocean.com/settings/api/tokens).
* Make sur you have a domain whose name servers are set to:
	 * ns1.digitalocean.com
	 * ns2.digitalocean.com
	 * ns3.digitalocean.com

## Usage

```
$ docker run --rm chrif/cocotte 
```

## Documentation
