language: generic
sudo: required
dist: trusty
before_install:
  # install docker
  - curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
  - sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
  - sudo apt-get update
  - sudo apt-get -y install docker-ce=17.12.0~ce-0~ubuntu
  # install docker-machine
  - curl -L https://github.com/docker/machine/releases/download/v0.13.0/docker-machine-`uname -s`-`uname -m` >/tmp/docker-machine
  - sudo install /tmp/docker-machine /usr/local/bin/docker-machine
  - sudo rm /usr/local/bin/docker-compose
  # install docker-compose
  - curl -L https://github.com/docker/compose/releases/download/1.18.0/docker-compose-`uname -s`-`uname -m` > docker-compose
  - chmod +x docker-compose
  - sudo mv docker-compose /usr/local/bin
script:
  - sh create-machine.sh
  - sh remove-machine.sh
env:
  global:
    # DIGITAL_OCEAN_API_TOKEN
    - secure: oaxN5rqUPSMMK0j0QVsg2hHRLc3cyHasI9Sgjeo8yurvSykgqjdsAx8IPdkaPCVS5BVvF1tMHsLOb4d9VhP3c51DKtra7S2xfLza5mfDUhtc3BpbDg8sAhwIyr3FqxlRaFUf8txIQ9/WFW1eZXoeua2tIkj7fwDBBCkDvou1S5+dODMBPMdEpTdgmVtXN5ugTg3eQV+HVz1VoScjG47B/wf416THA71JTeTY+oGF6mYT7npjbQ+tB1s38IQyvy38rb1GjunAQ62aMt0ad96Dp1CDjWzyC1kGjpiMNd5PsoPU02Zq2vAI7vGkJDxwUPGchieQolmjLm41pFXCtOWwyjQPSevSpgwYgVOnUZCJiuZqPLpNqSj2UfuMk4woyCRdH00U/enC0132bpi53KhXAAjDNDNJZhyVJbmus5c2C3gp1kKcRI+t7sNNy+EUtfjv2mAttshl65dCIokt/pCA59BY1IsTMfzOV3VB9u/1wa193UVDPrne4J1LO+LxeTBaBsrCaoQvFrHtsS/p5bSF+iiJxPTCAwb9mKz+6zw5ARWNGIUd5w5NdJOFAJw8IDdR+b8WS7sFwdLoPqW7rJjtjnpUWPrIDzFNN1Xx0MmNB8CyjgPo8sTSbiFOGByw6U04A2pDxE3r08woD4BxVv4wQHMvRJ1IQFeM61FmbZkzy/s=
    # MYSQL_ROOT_PASSWORD
    - secure: A80CAxfgGrHT585eQC3/IRgXSFv3vIKvGkQ8xuaTxorYzNOUqYKwtIFtAJTLYz1Ae6bjR3ie7MyN7iJ4Du1C2Z8uGggyeZvnEb3Hrx2jeG9Qg4i4L+Nrhi2heEENLj2Db8yUn7bznbQp4bXpW+eAptGZvhx+dqf58KeKEqWeNhW8Vmsl+NwK7dqrC+H1Cc9bEuC2HHWVXMMYfh1yIhuxL7FjQobCpjYc2/sKXyGGni9jnJBEnFAywreZ5I214TDn6hOB+rOWd3tjFH9WmQI7sKp9md9InVqvxkS9OU1JzRCnnJO0/gJwtR9NxhnV9/lg96ZaPXm4uT/pHrHwax14NHBAO14tULNcmdjRkwfKsuwOnJoVc03MBlEuLn+/i2WtLs7ZJXVb7s8A765+lMixTaREIZqOjHFSTlhPmyQ2bsGV18ehzpNgRyUg2MdE8/FVn4aLQ68WkHZ59PJumwjOdoTm+lyhyJKk+2PsrB7COe6u5RaZ2uuUEghhd7Q21bhOnWBzoCrhLzbmExkv3iWWO8ZtLeZFhzEpX6LVsMt8ymdNPQ8AhFOLTXUMlLxuYPPIjfXQB0IKjtpoufsv6oJiXA1g2ZEi7XtUdGYUSceTyUNxeOHEDx5KLUOPq44IYE8wZbv8UbBQAW4WXsL0GDFPO2V7RvjXQUMxGZD6va9ONho=
    # MYSQL_PASSWORD
    - secure: Jck0krgRl6YzRbk0n8LMgI94mlpeaFhKwlSr89gpwoQto0ebiC0rXvJ/kTciGjP3jCw6pAdWYcyBRnHKwfvoALuxmHOw+HFcfsWq+aVoloHQbRuLJTScOqQkgd4dFhkR+dhkXW2ld7OKvGZ6ohPk9NaBsJBVcNX/PMcNHLGNzyXQLE9+/WB7JpRJdhPp7xC0FW09fYEOcIkDwB4mjqV/MhWt6FJfNyf/vdrYyh/4P82x1CONNpCpUpkBdva83JsuvHXCJQ2StDRokodq7F08+D5crX4h0I1jQOtQKIahEyUCxpiov8SBES/yb+oXspsIdEzDKHlhPB7DPKAEAgo6EcAIas4JUnvC0aJeM34w56bklpms+zXhgAsswb1UEnUxQgVp4eNn6liNAJsd0JAjCTL9kVq2pNG7QBgYKy6RN8ni49F/LQqHmAhQ/qG5jfllEBOBQ2dReh4ARQRdiC2yjrKTABPIx/CsTH7BEkSJVpneKxmKXDJ57GiWPJe6y6B6SaoDCvsXlx9vojloj3LcfFjcQVCLPI06LuyLPB7m/7/FW03M5SbCp4wU1jCX9/lAK0iuwAoGmg1xRb2gSYdQrHfdPnf8LIa+Mfcrt2x5Hc8kPx5I7+F9jlqEjzZYDwvYWkHurkYuIDRWXqB/J/83nZkintiAHn6IKAaGF3ef1zU=
